{% extends "base.html" %}

{% block title %}Tracked Products{% endblock %}

{% block content %}

<section class="section summary">
  <h1 class="title has-text-centered">Your Products</h1>

  <div class="level">
    <div class="level-item">
      <p class="subtitle is-5">
        <strong>{{ products | length }}</strong> total products
      </p>
    </div>
    <div class="level-item">
      <p class="subtitle is-5">
        <strong>{{ on_sale_products | length }}</strong> on sale right now
      </p>
    </div>
    <div class="level-item">
      <div>
        <a href="/products/refreshallforuser" id="refresh-all-products" class="button is-light is-info">Refresh Price For All Products</a>
        <p id="updating-products-label" class="is-hidden"><strong>Updating products: <span id="completed_count"></span>/<span id="num-of-products"></span> done</strong></p>
        <progress id="updating-products-progress-bar" class="progress is-small is-primary is-hidden" max="100" value="0"></progress>
        {% if request.GET.refreshtime %}
        <p id="update-time-taken">Updates finished in {{ request.GET.refreshtime }} seconds</p>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<section class="section products">
  {% for product in page_obj %}
  {% include "product_tracker/single_product.html" %}
  <hr>
  {% endfor %}

  <div class="pagination center">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a class="button is-light" href="?page=1">&laquo; first</a>
            <a class="button is-light" href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a class="button is-light" class="outline secondary" href="?page={{ page_obj.next_page_number }}">next</a>
            <a class="button is-light" class="outline secondary" href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
</section>



{% endblock content %}